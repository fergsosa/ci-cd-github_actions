name: 04 - Reusable Test Workflow

on: workflow_call
# on:
#  workflow_call:
#    inputs:
#      node-version:
#        description: "VersiÃ³n de Node.js a utilizar"
#        required: false
#        default: "20"
#      test-command:
#        description: "Comando de testing a ejecutar"
#        required: false
#        default: "npm test"
#    secrets:
#      TEST_API_KEY:
#        required: false
#        description: "API key para pruebas (opcional)"
#    outputs:
#      test-result:
#        description: "Resultado general de las pruebas"
#        value: ${ { jobs.test.outputs.result }}

jobs:
  test:
    name: ðŸ” Test Job
    runs-on: ubuntu-latest
    outputs:
      result: ${ { steps.evaluate.outputs.summary }}

    steps:
      - name: ðŸ“¥ Checkout del cÃ³digo
        run: |
          # Clonar el repositorio actual para ejecutar las pruebas

      - name: âš™ï¸ Configurar Node.js
        run: |
          # Configurar entorno Node.js con la versiÃ³n indicada en los inputs
          # Habilitar cache de npm para optimizar tiempos de instalaciÃ³n
          # "inputs":
            # "node-version: ${ { inputs.node-version }}"
            # "cache: npm"

      - name: ðŸ“¦ Instalar dependencias
        run: |
          # Instalar todas las dependencias del proyecto
          # "run": "npm ci"

      - name: ðŸ§ª Ejecutar pruebas
        run: |
          # Ejecutar el comando de test definido por input
          # "env":
            # "TEST_API_KEY: ${ { secrets.TEST_API_KEY }}"
          # "run": "${ { inputs.test-command }}"

      - name: ðŸ“Š Evaluar resultado
        run: |
          # Simular la evaluaciÃ³n de los resultados del test
          # Exportar resumen al contexto de outputs
          # "id": "evaluate"
          # "run": "echo summary=âœ… Todas las pruebas pasaron correctamente >> $GITHUB_OUTPUT"

      - name: ðŸ“¤ Subir reporte de test
        run: |
          # Si existen reportes de pruebas, subirlos como artefacto
          # "if": "always()"
          # "uses": "actions/upload-artifact@v4"
          # "with":
            # "name: test-report"
            # "path: reports/"

      - name: âœ… Resumen Final | Workflow completado
        run: |
          echo "ðŸŽ¯ Testing finalizado correctamente"
          echo "ðŸ“˜ Siguiente paso: explorar 05-reusable-deploy.yml"
