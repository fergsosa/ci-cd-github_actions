name: 05 - Reusable Deploy Workflow

on: workflow_call
# on:
#  workflow_call:
#    inputs:
#      environment:
#        description: "Entorno de despliegue (staging, production, etc.)"
#        required: false
#        default: "staging"
#      region:
#        description: "RegiÃ³n de despliegue (us-east-1, eu-west-1, etc.)"
#        required: false
#        default: "us-east-1"
#      deploy-command:
#        description: "Comando de despliegue personalizado"
#        required: false
#        default: "npm run deploy"
#    secrets:
#      DEPLOY_TOKEN:
#        required: true
#        description: "Token o credencial requerida para el despliegue"
#    outputs:
#      deploy-status:
#        description: "Resultado del proceso de despliegue"
#        value: ${ { jobs.deploy.outputs.status }}

jobs:
  deploy:
    name: ğŸš€ Deploy Job
    runs-on: ubuntu-latest

    outputs:
      status: ${ { steps.final-status.outputs.state }}

    steps:
      - name: ğŸ“¥ Checkout del repositorio
        run: |
          # Clonar el repositorio antes de iniciar el proceso de despliegue

      - name: âš™ï¸ Configurar entorno
        run: |
          # Configurar variables y entorno necesarios para el despliegue
          # "inputs":
            # "environment: ${ { inputs.environment }}"
            # "region: ${ { inputs.region }}"
          # "env":
            # "DEPLOY_TOKEN: ${ { secrets.DEPLOY_TOKEN }}"

      - name: ğŸ§© Validar entorno
        run: |
          # Verificar que las credenciales y entorno sean vÃ¡lidos
          # "run": "echo 'Validando entorno ${ { inputs.environment }}...'"

      - name: ğŸš€ Ejecutar despliegue
        run: |
          # Ejecutar el comando de despliegue configurado por input
          # "run": "${ { inputs.deploy-command }}"

      - name: ğŸ“¦ Subir logs del despliegue
        run: |
          # Subir logs o resultados del despliegue como artefacto
          # "uses": "actions/upload-artifact@v4"
          # "with":
            # "name: deploy-logs"
            # "path: logs/"

      - name: âœ… Exportar estado final
        run: |
          # Simular resultado del despliegue y exportarlo como output
          # "id": "final-status"
          # "run": "echo state=âœ… Despliegue completado correctamente >> $GITHUB_OUTPUT"

      - name: âœ… Resumen Final | FinalizaciÃ³n
        run: |
          # echo "ğŸ¯ Despliegue finalizado correctamente"
          # echo "ğŸŒ Entorno: ${ { inputs.environment }}"
          # echo "ğŸ“¦ RegiÃ³n: ${ { inputs.region }}"
          # echo "ğŸ“˜ Siguiente paso: explorar 06-conditionals.yml"
